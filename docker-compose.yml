version: '3'

services:

  products:
    container_name: products-ms
    image: paulogabrieljb/ms-products:0.1
    ports:
    - "8000:8000"
    networks:
    - microservices
  
  catalog:
    container_name: catalog-ms
    image: paulogabrieljb/ms-catalog:0.1
    environment:
      PRODUCT_URL: 'products-ms:8000'
    ports:
    - "3000:3000"
    networks:
    - microservices

  redis:
    container_name: redis-ms
    image: redis:6.2-alpine
    ports:
    - "6379:6379"
    networks:
    - microservices

  rabbitmq:
    container_name: 'rabbitmq'
    image: rabbitmq:3-management-alpine
    ports:
    - "5672:5672"
    - "15672:15672"
    networks: 
    - microservices
    volumes: 
    - rabbitmq_vol:/var/lib/rabbitmq

networks:
  microservices:

volumes:
  rabbitmq_vol: